<div class="wrapper">
  <div class="wrapper_filter mat-elevation-z4">
    <form>
      <div class="row">
        <mat-form-field class="item" appearance="outline">
          <mat-label>Kinds</mat-label>
          <mat-select [(value)]="deviceParams.kind" name="kindValid">
            <mat-select-trigger>{{
              deviceParams?.kind?.name
            }}</mat-select-trigger>
            <mat-option>None</mat-option>
            <mat-option *ngFor="let kind of kinds$ | async" [value]="kind"
              ><mat-icon>{{ kind.icon }}</mat-icon
              >{{ kind.name }}</mat-option
            >
          </mat-select>
        </mat-form-field>

        <mat-form-field class="item" appearance="outline">
          <mat-label>Category</mat-label>
          <mat-select
            [(value)]="deviceParams.category"
            name="categoryValid"
            #selectedCategory
            (selectionChange)="categorySelectionChange(selectedCategory.value)"
          >
            <mat-select-trigger>{{
              deviceParams?.category?.name
            }}</mat-select-trigger>
            <mat-option>None</mat-option>
            <mat-option
              *ngFor="let category of categories$ | async"
              [value]="category"
              ><mat-icon>{{ category.icon }}</mat-icon
              >{{ category.name }}</mat-option
            >
          </mat-select>
        </mat-form-field>

        <mat-form-field class="item" appearance="outline">
          <mat-label>
            {{ getDeviceComponentsLabelDescripton(deviceParams.category) }}
          </mat-label>
          <mat-select
            [disabled]="!isCategorySelected()"
            multiple
            name="deviceComponentValid"
            [(value)]="deviceParams.deviceComponents"
          >
            <mat-select-trigger>{{
              getDeviceComponentsTriggerText()
            }}</mat-select-trigger>
            <mat-option
              *ngFor="let component of components$ | async"
              [value]="component"
              ><mat-icon>{{ component.icon }}</mat-icon
              >{{ component.name }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
    </form>
    <div class="row">
      <button
        class="item"
        mat-raised-button
        color="warn"
        (click)="onResetFilterClick()"
      >
        Clear filter
      </button>
      <button
        class="item"
        mat-raised-button
        color="primary"
        (click)="onApplyFilterClick()"
      >
        Apply filter
      </button>
    </div>
  </div>
  <div class="wrapper_devices">
    <div class="devices_container">
      <div
        class="card mat-elevation-z4"
        *ngFor="let device of devices$ | async"
      >
        <mat-card [routerLink]="['/devices/' + device.id]">
          <mat-icon [inline]="true" class="card_icon">{{
            device.icon
          }}</mat-icon>
          <mat-divider></mat-divider>
          <mat-card-footer>
            <h2>{{ device.name | uppercase }}</h2>
          </mat-card-footer>
        </mat-card>
      </div>
    </div>
  </div>
</div>
